<!DOCTYPE html>
<html lang="de" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GiroCode Generator (SEPA‚ÄëQR/EPC) ‚Äì kostenlos & lokal</title>
  <meta name="description" content="SEPA‚ÄëQR in Sekunden erstellen: IBAN, Betrag, Verwendungszweck. 100% lokal, PDF‚ÄëRechnung, keine Daten√ºbertragung.">
  <link rel="canonical" href="https://www.girocodegenerator.com/">
  <link rel="alternate" hreflang="de" href="https://www.girocodegenerator.com/">
  <link rel="alternate" type="application/atom+xml" title="GiroCodeGenerator.com Feed" href="/feed.xml">
  <meta name="robots" content="index,follow">
  <style>
    :root{
      --bg:#0b0c10; --card:#121318; --text:#e8eaf0; --muted:#98a1b3; --line:#1f2431; --input:#0f1117;
      --accent:#22c55e; --accent2:#16a34a; --btn:#0f172a; --shadow:0 10px 24px rgba(0,0,0,.25);
    }
    :root[data-theme="light"]{
      --bg:#f7f8fb; --card:#ffffff; --text:#0f1221; --muted:#435067; --line:#e6e9f2; --input:#f2f4f9;
      --accent:#0ea5e9; --accent2:#22c55e; --btn:#eef2ff; --shadow:0 8px 18px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text)}
    .wrap{max-width:1100px;margin:0 auto;padding:24px}
    h1{font-size:28px;margin:0 0 8px}
    p{margin:0;color:var(--muted)}
    .toolbar{display:flex;gap:8px;align-items:center;justify-content:space-between;margin-top:10px}
    .kicker{display:inline-flex;gap:8px;align-items:center;padding:4px 10px;border-radius:999px;background:#133018;color:#86efac;font-size:12px}
    .grid{display:grid;grid-template-columns:1.1fr .9fr;gap:16px;margin-top:18px}
    .card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:16px;box-shadow:var(--shadow)}
    label{display:block;font-size:13px;margin:10px 0 6px;color:var(--muted)}
    input,textarea{width:100%;padding:12px;border-radius:12px;border:1px solid var(--line);background:var(--input);color:var(--text)}
    textarea{resize:vertical}
    .row{display:flex;gap:8px;flex-wrap:wrap}
    .two{display:grid;grid-template-columns:1fr 1fr;gap:8px}
    .btn{cursor:pointer;padding:12px 16px;border-radius:12px;border:1px solid var(--line);background:var(--btn);color:var(--text);transition:.18s ease}
    .btn:hover{transform:translateY(-1px);box-shadow:var(--shadow)}
    .btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent2));border:none;font-weight:700;color:#fff}
    .muted{font-size:12px;color:var(--muted)}
    .qrbox{display:flex;align-items:center;justify-content:center;min-height:220px;border:1px dashed var(--line);border-radius:12px;background:var(--input)}
    .ok{color:#16a34a}.err{color:#ef4444}
    .toggle{padding:10px 12px;border-radius:10px;background:var(--input);border:1px solid var(--line);cursor:pointer}
    #logoPreview{display:none;max-height:64px;border:1px solid var(--line);border-radius:6px;margin-top:8px}

    table.items{width:100%;border-collapse:separate;border-spacing:0 8px;margin-top:10px}
    table.items th{font-size:12px;text-transform:uppercase;letter-spacing:.04em;color:var(--muted);text-align:left;padding:0 8px}
    table.items td{background:var(--input);border:1px solid var(--line);padding:6px;border-radius:10px}
    table.items input{background:transparent;border:none;padding:8px;width:100%;color:var(--text)}
    .t-right{text-align:right}
    .sum{display:grid;grid-template-columns:1fr auto;gap:8px;margin-top:12px}
    .sum div{padding:10px 12px;border:1px solid var(--line);border-radius:12px;background:var(--input)}
    .sum .num{font-variant-numeric:tabular-nums;text-align:right}
    .footer{margin-top:20px;font-size:12px;color:var(--muted)}
    .visually-hidden{position:absolute!important;clip:rect(1px,1px,1px,1px)!important;padding:0!important;border:0!important;height:1px!important;width:1px!important;overflow:hidden!important;white-space:nowrap!important}
    .disclaimer{margin:14px 0;padding:12px;border:1px solid rgba(125,125,125,.18);border-radius:12px;background:rgba(255,255,255,.04)}
    [data-theme="light"] .disclaimer{background:rgba(0,0,0,.03)}
    .disclaimer-row{display:flex;gap:10px;align-items:flex-start}
    .disclaimer input[type="checkbox"]{margin-top:.2rem;min-width:18px;min-height:18px}
    .disclaimer-details{margin-top:8px}
    .disclaimer-details > summary{cursor:pointer;opacity:.9}
    .disclaimer-text{margin-top:8px;line-height:1.65;opacity:.95}
    .disclaimer-hint{margin-top:8px;color:#fbbf24}
    .disclaimer.attn{animation:shake .3s linear 1;border-color:#ef4444}
    @keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(6px)}75%{transform:translateX(-6px)}}
    @media (max-width:960px){.grid{grid-template-columns:1fr}}
    /* internal links grid */
    .link-grid{display:grid;gap:10px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));margin:12px 0}
    .link-grid a{display:block;padding:10px 12px;border:1px solid rgba(125,125,125,.18);border-radius:12px;text-decoration:none;opacity:.95}
    .link-grid a:hover{opacity:1;transform:translateY(-1px)}
    .link-grid small{display:block;opacity:.75;margin-top:4px}
    .intent-syn{margin:16px 0;padding:12px;border:1px solid rgba(125,125,125,.18);border-radius:12px;background:rgba(255,255,255,.04)}
    [data-theme="light"] .intent-syn{background:rgba(0,0,0,.03)}
    .intent-syn h2{margin:0 0 8px;font-size:1.05rem}
    .intent-syn p{margin:0 0 6px;opacity:.95}
    .intent-syn ul{margin:8px 0 0 1.2em}
    .intent-syn li{margin:.15rem 0}
    .author-box{display:flex;gap:12px;align-items:center;margin:12px 0;padding:12px;border:1px solid rgba(125,125,125,.18);border-radius:12px;background:rgba(255,255,255,.04)}
    [data-theme="light"] .author-box{background:rgba(0,0,0,.03)}
    .author-box .meta{font-size:.95rem;opacity:.95}
    .author-box .meta .muted{opacity:.75}
    .trust-bar{display:grid;gap:10px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));margin:14px 0}
    .trust-bar .badge{border:1px solid rgba(125,125,125,.18);border-radius:12px;padding:10px 12px;background:rgba(255,255,255,.04)}
    [data-theme="light"] .trust-bar .badge{background:rgba(0,0,0,.03)}
    .breadcrumbs{font-size:.9rem;opacity:.85;margin:8px 0}
  </style>
  <style>
/* ‚Äî‚Äî‚Äî Top-Nav (gekapselt, √ºberschreibt nichts Globales) ‚Äî‚Äî‚Äî */
.app-nav{position:sticky;top:0;z-index:1000;border-bottom:1px solid rgba(125,125,125,.18);
  background:rgba(255,255,255,.65);backdrop-filter:saturate(180%) blur(10px)}
[data-theme="dark"] .app-nav{background:rgba(18,18,18,.65);border-color:rgba(255,255,255,.12)}
.app-nav .nav-bar{display:flex;align-items:center;justify-content:space-between;gap:12px;max-width:1100px;margin:0 auto;padding:10px 16px}
.app-nav .brand{font-weight:700;text-decoration:none;color:inherit;letter-spacing:.2px}
.app-nav .nav-check{display:none}
.app-nav .nav-burger{display:none;cursor:pointer;width:36px;height:28px;align-items:center;justify-content:center}
.app-nav .nav-burger span{display:block;height:2px;width:22px;background:currentColor;margin:4px 0;transition:transform .25s ease,opacity .25s ease}
.app-nav .nav-menu{max-width:1100px;margin:0 auto;padding:0 8px 10px;display:flex;gap:6px;align-items:center}
.app-nav .nav-menu a,
.app-nav .dropdown > summary{color:inherit;text-decoration:none;padding:10px 12px;border-radius:10px;opacity:.9;transition:opacity .2s ease,background .2s ease,transform .2s ease}
.app-nav .nav-menu a:hover,
.app-nav .dropdown > summary:hover{opacity:1;background:rgba(127,127,127,.12)}
/* Dropdown */
.app-nav .dropdown{position:relative;list-style:none}
.app-nav .dropdown > summary{list-style:none;cursor:pointer}
.app-nav .dropdown > summary::-webkit-details-marker{display:none}
.app-nav .dropdown[open] > summary{background:rgba(127,127,127,.12)}
.app-nav .dropdown .dropdown-panel{position:absolute;top:42px;left:0;min-width:230px;padding:8px;border-radius:12px;border:1px solid rgba(125,125,125,.18);
  background:rgba(255,255,255,.95);backdrop-filter:saturate(180%) blur(10px);display:flex;flex-direction:column}
[data-theme="dark"] .app-nav .dropdown .dropdown-panel{background:rgba(18,18,18,.95);border-color:rgba(255,255,255,.12)}
.app-nav .dropdown .dropdown-panel a{padding:10px;border-radius:8px}
.app-nav .dropdown .dropdown-panel a:hover{background:rgba(127,127,127,.12)}
/* Responsive */
@media (max-width: 900px){
  .app-nav .nav-burger{display:flex}
  .app-nav .nav-menu{display:none;flex-direction:column;gap:4px;padding:8px 16px 16px}
  .app-nav .dropdown .dropdown-panel{position:static;border:1px solid rgba(125,125,125,.18)}
  .app-nav .nav-check:checked ~ .nav-menu{display:flex}
  /* Burger Animation */
  .app-nav .nav-check:checked + .nav-bar .nav-burger span:nth-child(1){transform:translateY(6px) rotate(45deg)}
  .app-nav .nav-check:checked + .nav-bar .nav-burger span:nth-child(2){opacity:0}
  .app-nav .nav-check:checked + .nav-bar .nav-burger span:nth-child(3){transform:translateY(-6px) rotate(-45deg)}
}
  </style>
  <script type="application/ld+json">
  {
   "@context":"https://schema.org",
   "@type":"FAQPage",
   "mainEntity":[
    {"@type":"Question","name":"Was ist ein GiroCode?","acceptedAnswer":{"@type":"Answer","text":"Ein standardisierter SEPA-QR-Code (EPC), der Empf√§nger, IBAN, Betrag & Verwendungszweck enth√§lt."}},
    {"@type":"Question","name":"Ist die Nutzung sicher?","acceptedAnswer":{"@type":"Answer","text":"Ja. Alles l√§uft lokal im Browser ‚Äì wir √ºbertragen keine Eingaben an Server."}},
    {"@type":"Question","name":"Wie scanne ich den Code?","acceptedAnswer":{"@type":"Answer","text":"Mit der QR-/Kamera-Funktion deiner Banking-App, die SEPA-QR (GiroCode) unterst√ºtzt."}}
   ]
  }
  </script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "@id": "https://www.girocodegenerator.com/#app",
  "name": "GiroCode Generator",
  "applicationCategory": "FinanceApplication",
  "operatingSystem": "Web",
  "url": "https://www.girocodegenerator.com/",
  "offers": { "@type": "Offer", "price": "0", "priceCurrency": "EUR" },
  "featureList": [
    "SEPA-QR (EPC) Generator",
    "PDF-Rechnung mit QR",
    "Lokale Verarbeitung (keine Server-√úbertragung)"
  ],
  "publisher": {
    "@type": "Organization",
    "name": "GiroCodeGenerator.com",
    "@id": "https://www.girocodegenerator.com/#org"
  }
}
</script>
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"Organization",
  "@id":"https://www.girocodegenerator.com/#org",
  "name":"GiroCodeGenerator.com",
  "url":"https://www.girocodegenerator.com/",
  "address":{
    "@type":"PostalAddress",
    "streetAddress":"Koppelstra√üe 6a",
    "postalCode":"27711",
    "addressLocality":"Osterholz-Scharmbeck",
    "addressCountry":"DE"
  }
}
</script>
  <style>
  /* CLS‚ÄëReserven (√§ndern nichts an deiner Logik, nur Platzhalter) */
  .qr-slot{display:inline-block;min-width:180px;min-height:180px;aspect-ratio:1/1}
  .pdf-slot{min-height:480px}
  /* Fallbacks f√ºr g√§ngige IDs/Klassen (ohne √úberschreiben harter Styles) */
  #qrCanvas,canvas.qr,#qr,.qr-canvas{min-width:180px;min-height:180px}
  #qr-area,#qr-wrap,.qr-preview{min-width:180px;min-height:180px}
  #pdf-preview,#invoicePreview,.invoice-preview{min-height:480px}
  </style>
  <!-- SEO: WebSite + SearchAction -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebSite",
    "url":"https://www.girocodegenerator.com",
    "name":"GiroCodeGenerator.com",
    "potentialAction":{
      "@type":"SearchAction",
      "target":"https://www.google.com/search?q=site:girocodegenerator.com+{search_term_string}",
      "query-input":"required name=search_term_string"
    }
  }
  </script>

  <!-- Open Graph -->
  <meta property="og:title" content="GiroCode Generator ‚Äì SEPA‚ÄëQR/EPC, kostenlos & lokal">
  <meta property="og:description" content="SEPA‚ÄëQR in Sekunden: IBAN, Betrag, Zweck. PDF‚ÄëRechnung. Keine Datenspeicherung.">
  <meta property="og:url" content="https://www.girocodegenerator.com">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://www.girocodegenerator.com/og-image.png">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="GiroCode Generator ‚Äì SEPA‚ÄëQR/EPC, kostenlos & lokal">
  <meta name="twitter:description" content="SEPA‚ÄëQR in Sekunden: IBAN, Betrag, Zweck. PDF‚ÄëRechnung. Keine Datenspeicherung.">
  <meta name="twitter:image" content="https://www.girocodegenerator.com/og-image.png">
</head>
<body>
<header class="app-nav" role="banner">
  <input type="checkbox" id="nav-check" class="nav-check" aria-hidden="true">
  <div class="nav-bar">
    <a class="brand" href="/">GiroCode&nbsp;Generator</a>
    <label for="nav-check" class="nav-burger" aria-label="Men√º √∂ffnen/schlie√üen">
      <span></span><span></span><span></span>
    </label>
  </div>
  <nav id="nav-menu" class="nav-menu" aria-label="Hauptnavigation" data-skip-consent="true">
    <a href="/">Start</a>
    <details class="dropdown">
      <summary>Wissen</summary>
      <div class="dropdown-panel">
        <a href="/wissen/girocode">GiroCode</a>
        <a href="/wissen/epc-standard">EPC-Standard</a>
        <a href="/wissen/iban-bic">IBAN &amp; BIC</a>
        <a href="/wissen/betrag-und-zweck">Betrag &amp; Zweck</a>
        <a href="/wissen/scannen">Scannen</a>
        <a href="/wissen/rechnung">Rechnung</a>
        <a href="/wissen/banking-apps">Banking‚ÄëApps</a>
      </div>
    </details>
    <a href="/ueber-uns/">√úber uns</a>
    <a href="/impressum">Impressum</a>
    <a href="/datenschutz">Datenschutz</a>
  </nav>
</header>
<!-- TRUST-BAR:START -->
<nav class="breadcrumbs" aria-label="Brotkrumen"><a href="/">Start</a> ‚Ä∫ <span>GiroCode Generator</span></nav>
<section aria-label="Sicherheit & Vertrauen" class="trust-bar">
  <div class="badge"><strong>100% lokal</strong><br><span class="muted">Keine Server‚ÄëSpeicherung deiner Eingaben</span></div>
  <div class="badge"><strong>EPC/SEPA‚Äëkonform</strong><br><span class="muted">Kompatibel mit g√§ngigen Banking‚ÄëApps</span></div>
  <div class="badge"><strong>Transparenz</strong><br><span class="muted"><a href="/impressum/">Impressum</a> &nbsp;¬∑&nbsp; <a href="/datenschutz/">DSGVO‚ÄëHinweise</a></span></div>
  <div class="badge"><strong>Stand</strong><br><span class="muted"><time datetime="2025-08-21">Aktualisiert 21.08.2025</time></span></div>
</section>
<!-- TRUST-BAR:END -->
<!-- INTENT-SYNONYMS:START -->
<section class="intent-syn" aria-label="Synonyme & Suchbegriffe">
  <h2>Auch gesucht als</h2>
  <p>Viele Nutzer suchen nach denselben Funktionen unter anderen Begriffen. Unser Tool deckt alle Varianten ab:</p>
  <ul>
    <li>SEPA‚ÄëQR Code Generator</li>
    <li>EPC QR Code / EPC‚ÄëStandard QR</li>
    <li>√úberweisungs‚ÄëQR / Zahlungs‚ÄëQR</li>
    <li>GiroCode f√ºr Rechnung / QR‚ÄëRechnung</li>
    <li>QR‚Äë√úberweisung (SEPA)</li>
  </ul>
</section>
<!-- INTENT-SYNONYMS:END -->
<!-- INTERNAL-LINKS:START -->
<section aria-label="Beliebte Themen">
  <h2>Beliebte Themen</h2>
  <div class="link-grid">
    <a href="/wissen/betrag-und-zweck" title="Betrag & Verwendungszweck im GiroCode">
      <strong>Betrag &amp; Verwendungszweck</strong>
      <small>Format EUR12.34 & klare Zwecke</small>
    </a>
    <a href="/wissen/epc-standard" title="EPC‚ÄëStandard">
      <strong>EPC‚ÄëStandard</strong>
      <small>Aufbau, Felder, Regeln</small>
    </a>
    <a href="/wissen/rechnung" title="GiroCode auf Rechnungen">
      <strong>GiroCode auf Rechnungen</strong>
      <small>Platzierung & Zuordnung</small>
    </a>
  </div>
</section>
<!-- INTERNAL-LINKS:END -->
  <div class="wrap">
    <div class="toolbar">
      <div class="kicker">Lokal ¬∑ keine Uploads</div>
      <button id="themeBtn" class="toggle" title="Theme umschalten">üåô Dark</button>
    </div>
    <h1>GiroCode Generator (SEPA-QR / EPC)</h1>
    <p>Erstelle GiroCodes f√ºr SEPA-√úberweisungen ‚Äì komplett lokal im Browser, ohne Daten-Upload. Optional mit Rechnungs-PDF.</p>

    <!-- CONTEXT-LINKS:START -->
    <p>Neu bei SEPA‚ÄëQR? Lies zuerst <a href="/wissen/betrag-und-zweck" title="Betrag & Verwendungszweck im GiroCode">Betrag &amp; Verwendungszweck richtig setzen</a> ‚Äì damit dein GiroCode sofort korrekt erkannt wird.</p>
    <!-- CONTEXT-LINKS:END -->

    <div class="grid">
      <div class="card">
        <h3 style="margin:0 0 8px">Absender</h3>
        <label>Absender (Name)</label>
        <input id="senderName" type="text">
        <label>Absender (Adresse)</label>
        <textarea id="senderAddress"></textarea>
        <label>Logo (optional)</label>
        <input id="logoInput" type="file" accept="image/*">
        <img id="logoPreview" alt="Logo-Vorschau">
        <h3 style="margin:20px 0 8px">Zahlungsdaten</h3>
        <label>Empf√§nger (Name)</label>
        <input id="name" placeholder="z.‚ÄØB. Max Mustermann e.‚ÄØK." />
        <div class="two">
          <div>
            <label>IBAN</label>
            <input id="iban" placeholder="DE89 3704 0044 0532 0130 00" />
          </div>
          <div>
            <label>BIC (optional)</label>
            <input id="bic" placeholder="z.‚ÄØB. COLSDE33" />
          </div>
        </div>
          <div class="two">
            <div>
              <label>Verwendungszweck</label>
              <input id="purpose" maxlength="140" placeholder="Rechnung 2025‚Äë0001" />
            </div>
            <div style="display:flex;align-items:center;gap:8px;margin-top:16px">
              <input id="autoAmount" type="checkbox" checked>
              <span class="muted">Betrag automatisch aus Positionen √ºbernehmen</span>
            </div>
          </div>
          <section id="disclaimer" class="disclaimer" role="group" aria-labelledby="disclaimer-title">
            <h2 id="disclaimer-title" class="visually-hidden">Haftungsausschluss</h2>
            <div class="disclaimer-row">
              <input type="checkbox" id="disclaimer-accept" aria-describedby="disclaimer-text">
              <label for="disclaimer-accept">
                Ich habe den <strong>Haftungsausschluss</strong> gelesen und akzeptiere ihn.
              </label>
            </div>
            <details class="disclaimer-details">
              <summary>Haftungsausschluss anzeigen</summary>
              <div id="disclaimer-text" class="disclaimer-text">
                <p><strong>Haftungsausschluss:</strong> Die bereitgestellten Funktionen (GiroCode‚Äë/SEPA‚ÄëQR‚ÄëErzeugung, Rechnungs‚ÄëPDF) werden ‚Äûwie besehen‚Äú und ohne Gew√§hrleistung bereitgestellt. Du bist selbst daf√ºr verantwortlich, <em>alle</em> Eingaben (insbesondere Empf√§ngername, IBAN, BIC, Betrag und Verwendungszweck) vor Nutzung zu pr√ºfen. Es werden keine Zahlungsdienste erbracht und keine Bankgesch√§fte vermittelt. Eine Haftung f√ºr fehlerhafte Eingaben, √úbertragungsfehler, Inkompatibilit√§ten mit einzelnen Banking‚ÄëApps, Folgesch√§den oder vers√§umte Zahlungen ist ausgeschlossen, soweit gesetzlich zul√§ssig. Die Verarbeitung erfolgt lokal im Browser; es findet keine serverseitige Speicherung deiner eingegebenen Inhalte statt. Beachte zus√§tzlich die Hinweise im <a href="/impressum">Impressum</a> und in der <a href="/datenschutz">Datenschutzerkl√§rung</a>.</p>
              </div>
            </details>
            <p class="disclaimer-hint" aria-live="polite" hidden>Bitte best√§tige den Haftungsausschluss, um fortzufahren.</p>
          </section>
          <div class="row" style="margin-top:10px">
            <button id="generate-qr" class="btn primary" data-requires-consent="true" onclick="makeQR()" disabled aria-disabled="true">GiroCode generieren</button>
            <button class="btn" onclick="clearQR()">Zur√ºcksetzen</button>
          </div>
        <div id="qrStatus" class="muted" style="margin-top:8px"></div>
      </div>

      <div class="card">
        <h3 style="margin:0 0 8px">Vorschau (QR)</h3>
        <div class="qrbox"><canvas id="qrCanvas" width="220" height="220"></canvas></div>
        <div class="muted" style="margin-top:8px">Tipp: Banking‚ÄëApp √∂ffnen & Code testen.</div>
      </div>
    </div>

    <div class="card" style="margin-top:16px">
      <div class="row" style="justify-content:space-between;align-items:center">
        <h3 style="margin:0">Positionen</h3>
        <button class="btn" onclick="addItem()">+ Position</button>
      </div>

      <table class="items">
        <thead>
          <tr>
            <th style="width:44px">Pos</th>
            <th>Beschreibung</th>
            <th style="width:90px">Menge</th>
            <th style="width:120px">Preis (‚Ç¨)</th>
            <th style="width:120px" class="t-right">Zwischensumme</th>
            <th style="width:60px"></th>
          </tr>
        </thead>
        <tbody id="itemsBody"></tbody>
      </table>

      <div class="two" style="margin-top:8px">
        <div>
          <label>Steuersatz (%)</label>
          <input id="vatRate" type="number" step="1" value="19">
        </div>
        <div></div>
      </div>

      <div class="sum">
        <div>Summe netto</div><div class="num" id="sumNet">0,00 ‚Ç¨</div>
        <div>USt.</div><div class="num" id="sumVat">0,00 ‚Ç¨</div>
        <div style="font-weight:700">Gesamt (brutto)</div><div class="num" id="sumGross">0,00 ‚Ç¨</div>
      </div>
    </div>

      <div class="row" style="margin-top:16px">
        <button id="download-pdf" class="btn primary" data-requires-consent="true" onclick="downloadPDF()" disabled aria-disabled="true">PDF herunterladen</button>
      </div>

    <section aria-labelledby="wissen-empfohlen" class="wissen-empfohlen">
      <h2 id="wissen-empfohlen">Wissen ‚Äì empfohlen</h2>
      <ul>
        <li><a href="/wissen/betrag-und-zweck" title="GiroCode: Betrag & Verwendungszweck">
          GiroCode: Betrag & Verwendungszweck
        </a></li>
      </ul>
    </section>
    <div class="footer">¬© <span id="y"></span> ¬∑ lokal ¬∑ keine Gew√§hr.</div>
  </div>

  <!-- Lib‚ÄëLoader: versucht lokal (/vendor), dann alternative CDNs -->
  <script>
    (function(){
      function loadScript(src){return new Promise(function(res,rej){var s=document.createElement('script');s.src=src;s.async=true;s.onload=res;s.onerror=function(){rej(new Error('Failed '+src))};document.head.appendChild(s);});}
      window.__libsReady=(async function(){
        var okQR=false, okPDF=false;
        try{await loadScript('/vendor/qrcode.min.js'); okQR=!!window.QRCode;}catch(e){}
        if(!okQR){try{await loadScript('https://unpkg.com/qrcode@1.5.3/build/qrcode.min.js'); okQR=!!window.QRCode;}catch(e){}}
        if(!okQR){try{await loadScript('https://cdnjs.cloudflare.com/ajax/libs/qrcode/1.5.3/qrcode.min.js'); okQR=!!window.QRCode;}catch(e){}}
        try{await loadScript('https://cdn.jsdelivr.net/npm/pdf-lib@1.17.1/dist/pdf-lib.min.js'); okPDF=!!window.PDFLib;}catch(e){}
        if(!okPDF){try{await loadScript('/vendor/pdf-lib.min.js'); okPDF=!!window.PDFLib;}catch(e){}}
        if(!okQR||!okPDF) console.warn('Lib load status',{okQR,okPDF});
        return {okQR,okPDF};
      })();
    })();
  </script>

  <script>
    // ===== Theme toggle =====
    const root=document.documentElement; const themeBtn=document.getElementById('themeBtn');
    const saved=localStorage.getItem('theme'); if(saved){ root.setAttribute('data-theme', saved); themeBtn.textContent = saved==='light'?'‚òÄÔ∏è Light':'üåô Dark'; }
    themeBtn.addEventListener('click',()=>{ const cur=root.getAttribute('data-theme')||'dark'; const next=cur==='dark'?'light':'dark'; root.setAttribute('data-theme',next); localStorage.setItem('theme',next); themeBtn.textContent = next==='light'?'‚òÄÔ∏è Light':'üåô Dark'; });

    // ===== Basic helpers =====
    document.getElementById('y').textContent=new Date().getFullYear();
    function setQRStatus(msg, ok){var el=document.getElementById('qrStatus'); el.textContent=msg||''; el.className= ok? 'ok':'err';}
    function clearQR(){const c=document.getElementById('qrCanvas'); const x=c.getContext('2d'); x.clearRect(0,0,c.width,c.height);}    

    // ===== IBAN Check (mod 97) =====
    function sanitizeIBAN(iban){return (iban||'').toUpperCase().replace(/\s+/g,'');}
    function ibanIsValid(iban){
      iban=sanitizeIBAN(iban); if(iban.length<15||iban.length>34)return false; const r=iban.slice(4)+iban.slice(0,4);
      const ex=r.replace(/[A-Z]/g,ch=>(ch.charCodeAt(0)-55).toString()); let rem=0; for(const d of ex){ rem=(rem*10+(+d))%97; } return rem===1;
    }

    // ===== Items model & totals =====
      const bodyEl=document.getElementById('itemsBody'); const vatEl=document.getElementById('vatRate'); const autoAmountEl=document.getElementById('autoAmount');
      const logoInput=document.getElementById('logoInput'); const logoPreview=document.getElementById('logoPreview');
    function fmt(n){return (isFinite(n)?n:0).toFixed(2).replace('.',',')+' ‚Ç¨';}
    function parseNum(v){const n=parseFloat(String(v).replace(',','.')); return isFinite(n)?n:0;}

    function addItem(data={desc:'', qty:1, price:0}){
      const i=bodyEl.children.length+1;
      const tr=document.createElement('tr');
      tr.innerHTML=`
        <td><input aria-label="Pos" value="${i}" style="width:48px" disabled></td>
        <td><input aria-label="Beschreibung" class="desc" value="${data.desc||''}"></td>
        <td><input aria-label="Menge" class="qty" type="number" min="0" step="0.01" value="${data.qty ?? 1}"></td>
        <td><input aria-label="Preis" class="price" type="number" min="0" step="0.01" value="${data.price ?? 0}"></td>
        <td class="t-right subtotal">0,00 ‚Ç¨</td>
        <td class="t-right"><button class="btn" title="Entfernen">‚úï</button></td>`;
      bodyEl.appendChild(tr);
      tr.addEventListener('input', computeTotals);
      tr.querySelector('button').addEventListener('click', ()=>{ tr.remove(); renumber(); computeTotals(); });
      computeTotals();
    }

    function renumber(){[...bodyEl.children].forEach((tr,idx)=>{ tr.querySelector('td:first-child input').value = idx+1; });}

    function getItems(){
      return [...bodyEl.children].map(tr=>{
        const desc = tr.querySelector('.desc').value.trim();
        const qty = parseNum(tr.querySelector('.qty').value);
        const price = parseNum(tr.querySelector('.price').value);
        return { desc, qty, price };
      });
    }

    function computeTotals(){
      const items=getItems(); let net=0;
      [...bodyEl.children].forEach((tr,idx)=>{
        const it=items[idx]; const sub=it.qty*it.price; net+=sub; tr.querySelector('.subtotal').textContent=fmt(sub);
      });
      const vatRate=parseNum(vatEl.value); const vatAmt=+(net*vatRate/100); const gross=net+vatAmt;
      document.getElementById('sumNet').textContent=fmt(net);
      document.getElementById('sumVat').textContent=fmt(vatAmt);
      document.getElementById('sumGross').textContent=fmt(gross);
      if(autoAmountEl.checked){ window.__lastGross = gross; }
    }

    // Seed rows
      addItem({desc:'Dienstleistung A', qty:1, price:100});
      addItem({desc:'Dienstleistung B', qty:1, price:50});
      vatEl.addEventListener('input', computeTotals);
      logoInput.addEventListener('change', async e=>{
        const file=e.target.files[0];
        if(file){
          const reader=new FileReader();
          reader.onload=ev=>{ logoPreview.src=ev.target.result; logoPreview.style.display='block'; };
          reader.readAsDataURL(file);
          window.__logoBytes=await file.arrayBuffer();
          window.__logoType=file.type;
        }else{
          logoPreview.style.display='none';
          logoPreview.removeAttribute('src');
          window.__logoBytes=null;
          window.__logoType=null;
        }
      });

    function getSafeGross(){
      if(typeof window.__lastGross === 'number' && isFinite(window.__lastGross)) return window.__lastGross;
      const items=getItems(); const net=items.reduce((a,c)=>a+c.qty*c.price,0); const vatRate=parseNum(vatEl.value); return net + net*vatRate/100;
    }

    // ===== EPC/GiroCode String =====
    function toAmountEUR(v){if(!v&&v!==0)return'';const num=Number(v);if(!isFinite(num)||num<=0)return'';return 'EUR'+num.toFixed(2);}    
    function buildEPC({name,iban,bic,amount,purpose}){
      const lines=['BCD','001','1','SCT',(bic||'').trim(),(name||'').trim().slice(0,70),sanitizeIBAN(iban),toAmountEUR(amount),'','',(purpose||'').trim().slice(0,140)];
      return lines.join('\n');
    }

    // ===== QR kompatibel zeichnen =====
    async function drawQRToCanvas(epc){
      const canvas=document.getElementById('qrCanvas'); const ctx=canvas.getContext('2d'); ctx.clearRect(0,0,canvas.width,canvas.height);
      if(window.QRCode && typeof window.QRCode.toCanvas==='function'){ await window.QRCode.toCanvas(canvas, epc, {errorCorrectionLevel:'M', margin:2, width:220}); return; }
      if(window.QRCode && window.QRCode.CorrectLevel){ const tmp=document.createElement('div'); tmp.style.position='fixed'; tmp.style.left='-9999px'; document.body.appendChild(tmp); new window.QRCode(tmp,{text:epc,width:220,height:220,correctLevel:window.QRCode.CorrectLevel.M}); await new Promise(r=>setTimeout(r,0)); const el=tmp.querySelector('canvas, img'); if(el){ if(el.tagName==='CANVAS')ctx.drawImage(el,0,0,220,220); else {await new Promise((res,rej)=>{el.onload=res; el.onerror=rej;}); ctx.drawImage(el,0,0,220,220);} } tmp.remove(); return; }
      if(typeof window.qrcode==='function'){ const qr=window.qrcode(0,'M'); qr.addData(epc); qr.make(); const html=qr.createImgTag(4,0); const src=(html.match(/src=\"([^\"]+)\"/)||[])[1]; const img=new Image(); img.src=src; await new Promise((res,rej)=>{img.onload=res; img.onerror=rej;}); ctx.drawImage(img,0,0,220,220); return; }
      throw new Error('Keine kompatible QR‚ÄëBibliothek gefunden.');
    }

    async function makeQR(){
      const name=document.getElementById('name').value; const iban=document.getElementById('iban').value; const bic=document.getElementById('bic').value; const purpose=document.getElementById('purpose').value;
      if(!ibanIsValid(iban)){ setQRStatus('IBAN ung√ºltig ‚Äì bitte pr√ºfen.', false); clearQR(); return; }
      const amount = getSafeGross();
      try{ await (window.__libsReady||Promise.resolve()); const epc=buildEPC({name,iban,bic,amount,purpose}); await drawQRToCanvas(epc); setQRStatus('QR erfolgreich generiert.', true);} catch(e){ console.error(e); setQRStatus(e.message||'Unbekannter Fehler bei der QR‚ÄëGenerierung.', false);} }

    // ===== PDF =====
    async function downloadPDF(){
      try{
        await (window.__libsReady||Promise.resolve());
        if(typeof PDFLib==='undefined'){ alert('PDF‚ÄëBibliothek nicht geladen.'); return; }
        const items=getItems(); const vatRate=parseNum(vatEl.value);
        const sumNet=items.reduce((a,c)=>a+c.qty*c.price,0); const vatAmt=sumNet*vatRate/100; const sumGross=sumNet+vatAmt;
        const name=document.getElementById('name').value||''; const iban=document.getElementById('iban').value||''; const bic=document.getElementById('bic').value||''; const purpose=document.getElementById('purpose').value||'';
        const senderName=document.getElementById('senderName').value||''; const senderAddress=document.getElementById('senderAddress').value||'';
        const { PDFDocument, StandardFonts, rgb }=PDFLib; const pdf=await PDFDocument.create();
        const size={w:595.28,h:841.89}; let page=pdf.addPage([size.w,size.h]);
        const font=await pdf.embedFont(StandardFonts.Helvetica); const bold=await pdf.embedFont(StandardFonts.HelveticaBold);
        const lineCol=rgb(0.16,0.18,0.25); const muted=rgb(0.45,0.5,0.65);
        const M=50; let y=size.h-M; let pageNum=0;

        let logoImg=null, qrImg=null;
        if(window.__logoBytes){
          try{ logoImg=window.__logoType==='image/png'?await pdf.embedPng(window.__logoBytes):await pdf.embedJpg(window.__logoBytes); }catch(e){ console.error(e); }
        }
        try{
          const c=document.getElementById('qrCanvas');
          const dataUrl=c?.toDataURL('image/png');
          if(dataUrl && dataUrl.length>100){ const bytes=await fetch(dataUrl).then(r=>r.arrayBuffer()); qrImg=await pdf.embedPng(bytes); }
        }catch(_){ }

        function wrap(text,width){
          const words=String(text||'').split(/\s+/); let line='', out=[];
          for(const w of words){ const t=line?line+' '+w:w; if(font.widthOfTextAtSize(t,11)>width){ if(line) out.push(line); line=w; } else line=t; }
          if(line) out.push(line); return out;
        }
        function line(){ page.drawLine({start:{x:M,y}, end:{x:size.w-M,y}, thickness:1, color:lineCol}); }
        function drawHeader(){
          const ty=size.h-M;
          page.drawText('Rechnung',{x:M,y:ty,size:24,font:bold});
          const ds=new Date().toISOString().slice(0,10); const dw=font.widthOfTextAtSize(ds,10);
          page.drawText(ds,{x:size.w-M-dw,y:ty+8,size:10,font,color:muted});
          let logoH=0, qrH=0;
          if(logoImg){
            const maxW=130,maxH=60; const s=Math.min(maxW/logoImg.width,maxH/logoImg.height,1);
            const w=logoImg.width*s, h=logoImg.height*s;
            page.drawImage(logoImg,{x:size.w-M-w,y:size.h-M-h,width:w,height:h});
            logoH=h;
          }
          if(pageNum===0 && qrImg){
            const qW=110; const s=qW/qrImg.width; const qH=qrImg.height*s;
            let qY=size.h-M-qH; if(logoH) qY=size.h-M-logoH-8-qH;
            page.drawImage(qrImg,{x:size.w-M-qW,y:qY,width:qW,height:qH}); qrH=qH;
          }
          const topRightBlock=(logoH && qrH)?logoH+8+qrH:Math.max(logoH,qrH);
          y=size.h-M-topRightBlock-16; if(!logoH && !qrH) y-=16;
        }
        function newPage(){ page=pdf.addPage([size.w,size.h]); pageNum++; drawHeader(); }
        function addPageIfNeeded(h,after){ if(y-h<M+40){ newPage(); if(after) after(); } }
        function drawTableHeader(){
          page.drawText('Pos',{x:cols[0],y,size:11,font:bold,color:muted});
          page.drawText('Beschreibung',{x:cols[1],y,size:11,font:bold,color:muted});
          page.drawText('Menge',{x:cols[2],y,size:11,font:bold,color:muted});
          page.drawText('Preis',{x:cols[3],y,size:11,font:bold,color:muted});
          page.drawText('Summe',{x:cols[4],y,size:11,font:bold,color:muted});
          y-=14; line(); y-=14;
        }

        drawHeader();

        if(senderName || senderAddress){
          page.drawText('Absender',{x:M,y,size:11,font:bold,color:muted}); y-=14;
          if(senderName){ page.drawText(senderName,{x:M,y,size:12,font:bold}); y-=14; }
          if(senderAddress){ senderAddress.split(/\r?\n/).forEach(l=>{ page.drawText(l,{x:M,y,size:11,font}); y-=14; }); }
          y-=6;
        }

        page.drawText('Zahlungsdaten',{x:M,y,size:11,font:bold,color:muted}); y-=14;
        const rows=[["Empf√§nger",name],["IBAN",iban],["BIC",bic||'-'],["Verwendungszweck",purpose||'-']];
        const labelW=110; rows.forEach(([k,v])=>{ page.drawText(k+':',{x:M,y,size:11,font,color:muted}); page.drawText(String(v),{x:M+labelW,y,size:11,font}); y-=14; });
        line(); y-=18;

        const cols=[M,M+30,M+300,M+380,M+460];
        drawTableHeader();
        items.forEach((it,idx)=>{
          const sub=it.qty*it.price; const lines=wrap(it.desc,cols[2]-cols[1]-8); const h=lines.length*14;
          addPageIfNeeded(h+20,drawTableHeader);
          const rowY=y;
          page.drawText(String(idx+1),{x:cols[0],y:rowY,size:11,font});
          lines.forEach((ln,i)=>page.drawText(ln,{x:cols[1],y:rowY-i*14,size:11,font}));
          page.drawText(String(it.qty),{x:cols[2],y:rowY,size:11,font});
          page.drawText(it.price.toFixed(2)+' ‚Ç¨',{x:cols[3],y:rowY,size:11,font});
          page.drawText(sub.toFixed(2)+' ‚Ç¨',{x:cols[4],y:rowY,size:11,font});
          y-=Math.max(h,14)+6;
        });

        addPageIfNeeded(100);
        const boxW=200; const boxH=vatRate?60:40; const boxX=size.w-M-boxW; const boxY=y-boxH;
        page.drawRectangle({x:boxX,y:boxY,width:boxW,height:boxH,borderColor:lineCol,borderWidth:1});
        let sy=y-14;
        if(vatRate){
          page.drawText('Summe netto',{x:boxX+10,y:sy,size:11,font});
          page.drawText(sumNet.toFixed(2)+' ‚Ç¨',{x:boxX+boxW-10-font.widthOfTextAtSize(sumNet.toFixed(2)+' ‚Ç¨',11),y:sy,size:11,font});
          sy-=14;
          page.drawText(`USt (${vatRate}%)`,{x:boxX+10,y:sy,size:11,font});
          page.drawText(vatAmt.toFixed(2)+' ‚Ç¨',{x:boxX+boxW-10-font.widthOfTextAtSize(vatAmt.toFixed(2)+' ‚Ç¨',11),y:sy,size:11,font});
          sy-=14;
        }
        page.drawText('Gesamt (brutto)',{x:boxX+10,y:sy,size:12,font:bold});
        page.drawText(sumGross.toFixed(2)+' ‚Ç¨',{x:boxX+boxW-10-bold.widthOfTextAtSize(sumGross.toFixed(2)+' ‚Ç¨',12),y:sy,size:12,font:bold});
        y=boxY-30;

        page.drawText('Erstellt lokal im Browser ¬∑ keine Daten√ºbertragung',{x:M,y:M-20,size:9,font,color:muted});

        const bytes=await pdf.save(); const blob=new Blob([bytes],{type:'application/pdf'}); const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='rechnung.pdf'; a.click(); setTimeout(()=>URL.revokeObjectURL(url),5000);
      }catch(e){ console.error(e); alert('PDF‚ÄëFehler: '+(e.message||e)); }
    }

    // ===== Init =====
    document.addEventListener('DOMContentLoaded',()=>{ if(bodyEl.children.length===0){ addItem({desc:'Dienstleistung A', qty:1, price:100}); addItem({desc:'Dienstleistung B', qty:1, price:50}); } computeTotals(); });
  </script>
  <section id="faq" style="max-width:820px;margin:24px auto;padding:0 16px">
    <h2>FAQ</h2>
    <details><summary>Was ist ein GiroCode?</summary>
      <p>Ein standardisierter SEPA-QR-Code (EPC), der Empf√§nger, IBAN, Betrag & Verwendungszweck enth√§lt.</p>
    </details>
    <details><summary>Ist die Nutzung sicher?</summary>
      <p>Ja. Alles l√§uft lokal im Browser ‚Äì wir √ºbertragen keine Eingaben an Server.</p>
    </details>
    <details><summary>Wie scanne ich den Code?</summary>
      <p>Viele Banking-Apps unterst√ºtzen SEPA-QR (GiroCode). QR-Scanner in der App √∂ffnen & Code scannen.</p>
    </details>
  </section>
<script>
/* Haftungsausschluss-Logik: Nur f√ºr Generieren/PDF, nie f√ºr Navigation */
(function(){
  const STORAGE_KEY = 'disclaimerAccepted_v1';
  const box = document.getElementById('disclaimer-accept');
  const hint = document.querySelector('.disclaimer-hint');
  const shell = document.getElementById('disclaimer');
  // Targets: nur explizit markierte Aktions-Buttons/Links
  const targetSelectors = [
    '[data-requires-consent]',
    '#generate-qr', '#create-qr', '#btn-generate', 'button.generate-qr', '[data-action="generate-qr"]',
    '#download-pdf', '#btn-download-pdf', '#pdfDownload', 'a.download-pdf', '[data-action="download-pdf"]'
  ];

  function qsa(sel){ return Array.from(document.querySelectorAll(sel)); }
  let targets = qsa(targetSelectors.join(','));

  // Navigation/Nicht-Ziel-Elemente werden grunds√§tzlich ignoriert
  // (z. B. Nav hat data-skip-consent="true")
  const accepted = () => (box && (box.checked || localStorage.getItem(STORAGE_KEY) === '1'));

  function applyState(){
    const ok = accepted();
    targets.forEach(el => {
      if (ok) {
        el.removeAttribute('disabled');
        el.setAttribute('aria-disabled','false');
      } else {
        // Buttons und pseudo-Buttons sperren; Navigation NIE sperren
        el.setAttribute('disabled','');
        el.setAttribute('aria-disabled','true');
      }
    });
    if (hint) hint.hidden = !!ok;
    if (shell && !ok) shell.classList.remove('attn');
  }

  if (box && localStorage.getItem(STORAGE_KEY)==='1'){ box.checked = true; }
  applyState();

  if (box){
    box.addEventListener('change', ()=>{
      if (box.checked){ localStorage.setItem(STORAGE_KEY,'1'); }
      else { localStorage.removeItem(STORAGE_KEY); }
      applyState();
    });
  }

  // Klicks nur auf Targets abfangen; Navigation nie blockieren
  document.addEventListener('click', (e)=>{
    const el = e.target.closest(targetSelectors.join(','));
    if (!el) return; // kein Target ‚Üí Navigation/sonstiges zulassen
    if (el.closest('[data-skip-consent="true"]')) return; // Safety: Nie in Navs/Skip-Bereichen
    if (!accepted()){
      e.preventDefault();
      e.stopPropagation();
      if (shell){ shell.classList.add('attn'); shell.scrollIntoView({behavior:'smooth', block:'center'}); setTimeout(()=>shell.classList.remove('attn'), 600); }
      if (hint){ hint.hidden = false; }
    }
  }, true);
})();
</script>
    <script>
  // Sanfte Bild-Optimierung: CLS vermeiden, ohne QR/JS zu ber√ºhren
  (function(){
    // Nicht-kritische Bilder lazy + async decodieren
    document.querySelectorAll('img:not([data-critical])').forEach(function(img){
      if(!img.hasAttribute('loading')) img.setAttribute('loading','lazy');
      if(!img.hasAttribute('decoding')) img.setAttribute('decoding','async');
    });
    // Falls es ein Logo-Preview gibt, feste Gr√∂√üe setzen (nur wenn nicht vorhanden)
    var lp = document.getElementById('logoPreview');
    if(lp){
      if(!lp.hasAttribute('width')) lp.setAttribute('width','120');
      if(!lp.hasAttribute('height')) lp.setAttribute('height','120');
    }
  })();
  </script>
  </body>
</html>
